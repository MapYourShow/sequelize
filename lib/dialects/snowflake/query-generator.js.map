{
  "version": 3,
  "sources": ["../../../src/dialects/snowflake/query-generator.js"],
  "sourcesContent": ["'use strict';\r\n\r\nconst _ = require('lodash');\r\nconst Utils = require('../../utils');\r\nconst { AbstractQueryGenerator } = require('../abstract/query-generator');\r\nconst util = require('util');\r\nconst { Op } = require('../../operators');\r\n\r\nconst JSON_FUNCTION_REGEX = /^\\s*((?:[a-z]+_){0,2}jsonb?(?:_[a-z]+){0,2})\\([^)]*\\)/i;\r\nconst JSON_OPERATOR_REGEX = /^\\s*(->>?|@>|<@|\\?[&|]?|\\|{2}|#-)/i;\r\nconst TOKEN_CAPTURE_REGEX = /^\\s*((?:([\"'`])(?:(?!\\2).|\\2{2})*\\2)|[\\s\\w]+|[()+,.;-])/i;\r\nconst FOREIGN_KEY_FIELDS = [\r\n  'CONSTRAINT_NAME as constraint_name',\r\n  'CONSTRAINT_NAME as constraintName',\r\n  'CONSTRAINT_SCHEMA as constraintSchema',\r\n  'CONSTRAINT_SCHEMA as constraintCatalog',\r\n  'TABLE_NAME as tableName',\r\n  'TABLE_SCHEMA as tableSchema',\r\n  'TABLE_SCHEMA as tableCatalog',\r\n  'COLUMN_NAME as columnName',\r\n  'REFERENCED_TABLE_SCHEMA as referencedTableSchema',\r\n  'REFERENCED_TABLE_SCHEMA as referencedTableCatalog',\r\n  'REFERENCED_TABLE_NAME as referencedTableName',\r\n  'REFERENCED_COLUMN_NAME as referencedColumnName',\r\n].join(',');\r\n\r\n/**\r\n * list of reserved words in Snowflake\r\n * source: https://docs.snowflake.com/en/sql-reference/reserved-keywords.html\r\n *\r\n * @private\r\n */\r\nconst SNOWFLAKE_RESERVED_WORDS = 'account,all,alter,and,any,as,between,by,case,cast,check,column,connect,connections,constraint,create,cross,current,current_date,current_time,current_timestamp,current_user,database,delete,distinct,drop,else,exists,false,following,for,from,full,grant,group,gscluster,having,ilike,in,increment,inner,insert,intersect,into,is,issue,join,lateral,left,like,localtime,localtimestamp,minus,natural,not,null,of,on,or,order,organization,qualify,regexp,revoke,right,rlike,row,rows,sample,schema,select,set,some,start,table,tablesample,then,to,trigger,true,try_cast,union,unique,update,using,values,view,when,whenever,where,with'.split(',');\r\n\r\nconst typeWithoutDefault = new Set(['BLOB', 'TEXT', 'GEOMETRY', 'JSON']);\r\n\r\nexport class SnowflakeQueryGenerator extends AbstractQueryGenerator {\r\n  constructor(options) {\r\n    super(options);\r\n\r\n    this.OperatorMap = {\r\n      ...this.OperatorMap,\r\n      [Op.regexp]: 'REGEXP',\r\n      [Op.notRegexp]: 'NOT REGEXP',\r\n    };\r\n  }\r\n\r\n  createDatabaseQuery(databaseName, options) {\r\n    options = {\r\n      charset: null,\r\n      collate: null,\r\n      ...options,\r\n    };\r\n\r\n    return Utils.joinSQLFragments([\r\n      'CREATE DATABASE IF NOT EXISTS',\r\n      this.quoteIdentifier(databaseName),\r\n      options.charset && `DEFAULT CHARACTER SET ${this.escape(options.charset, undefined, options)}`,\r\n      options.collate && `DEFAULT COLLATE ${this.escape(options.collate, undefined, options)}`,\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  dropDatabaseQuery(databaseName) {\r\n    return `DROP DATABASE IF EXISTS ${this.quoteIdentifier(databaseName)};`;\r\n  }\r\n\r\n  createSchema() {\r\n    return 'SHOW TABLES';\r\n  }\r\n\r\n  showSchemasQuery() {\r\n    return 'SHOW TABLES';\r\n  }\r\n\r\n  versionQuery() {\r\n    return 'SELECT CURRENT_VERSION()';\r\n  }\r\n\r\n  createTableQuery(tableName, attributes, options) {\r\n    options = {\r\n      charset: null,\r\n      rowFormat: null,\r\n      ...options,\r\n    };\r\n\r\n    const primaryKeys = [];\r\n    const foreignKeys = {};\r\n    const attrStr = [];\r\n\r\n    for (const attr in attributes) {\r\n      if (!Object.prototype.hasOwnProperty.call(attributes, attr)) {\r\n        continue;\r\n      }\r\n\r\n      const dataType = attributes[attr];\r\n      let match;\r\n\r\n      if (dataType.includes('PRIMARY KEY')) {\r\n        primaryKeys.push(attr);\r\n\r\n        if (dataType.includes('REFERENCES')) {\r\n          match = dataType.match(/^(.+) (REFERENCES.*)$/);\r\n          attrStr.push(`${this.quoteIdentifier(attr)} ${match[1].replace('PRIMARY KEY', '')}`);\r\n          foreignKeys[attr] = match[2];\r\n        } else {\r\n          attrStr.push(`${this.quoteIdentifier(attr)} ${dataType.replace('PRIMARY KEY', '')}`);\r\n        }\r\n      } else if (dataType.includes('REFERENCES')) {\r\n        match = dataType.match(/^(.+) (REFERENCES.*)$/);\r\n        attrStr.push(`${this.quoteIdentifier(attr)} ${match[1]}`);\r\n        foreignKeys[attr] = match[2];\r\n      } else {\r\n        attrStr.push(`${this.quoteIdentifier(attr)} ${dataType}`);\r\n      }\r\n    }\r\n\r\n    const table = this.quoteTable(tableName);\r\n    let attributesClause = attrStr.join(', ');\r\n    const pkString = primaryKeys.map(pk => this.quoteIdentifier(pk)).join(', ');\r\n\r\n    if (options.uniqueKeys) {\r\n      _.each(options.uniqueKeys, (columns, indexName) => {\r\n        if (columns.customIndex) {\r\n          if (typeof indexName !== 'string') {\r\n            indexName = `uniq_${tableName}_${columns.fields.join('_')}`;\r\n          }\r\n\r\n          attributesClause += `, UNIQUE ${this.quoteIdentifier(indexName)} (${columns.fields.map(field => this.quoteIdentifier(field)).join(', ')})`;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (pkString.length > 0) {\r\n      attributesClause += `, PRIMARY KEY (${pkString})`;\r\n    }\r\n\r\n    for (const fkey in foreignKeys) {\r\n      if (Object.prototype.hasOwnProperty.call(foreignKeys, fkey)) {\r\n        attributesClause += `, FOREIGN KEY (${this.quoteIdentifier(fkey)}) ${foreignKeys[fkey]}`;\r\n      }\r\n    }\r\n\r\n    return Utils.joinSQLFragments([\r\n      'CREATE TABLE IF NOT EXISTS',\r\n      table,\r\n      `(${attributesClause})`,\r\n      options.comment && typeof options.comment === 'string' && `COMMENT ${this.escape(options.comment, undefined, options)}`,\r\n      options.charset && `DEFAULT CHARSET=${options.charset}`,\r\n      options.collate && `COLLATE ${options.collate}`,\r\n      options.rowFormat && `ROW_FORMAT=${options.rowFormat}`,\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  describeTableQuery(tableName, schema, schemaDelimiter) {\r\n    const table = this.quoteTable(\r\n      this.addSchema({\r\n        tableName,\r\n        _schema: schema,\r\n        _schemaDelimiter: schemaDelimiter,\r\n      }),\r\n    );\r\n\r\n    return `SHOW FULL COLUMNS FROM ${table};`;\r\n  }\r\n\r\n  showTablesQuery(database, options) {\r\n    return Utils.joinSQLFragments([\r\n      'SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = \\'BASE TABLE\\'',\r\n      database ? `AND TABLE_SCHEMA = ${this.escape(database, undefined, options)}` : 'AND TABLE_SCHEMA NOT IN ( \\'INFORMATION_SCHEMA\\', \\'PERFORMANCE_SCHEMA\\', \\'SYS\\')',\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  addColumnQuery(table, key, dataType) {\r\n    return Utils.joinSQLFragments([\r\n      'ALTER TABLE',\r\n      this.quoteTable(table),\r\n      'ADD',\r\n      this.quoteIdentifier(key),\r\n      this.attributeToSQL(dataType, {\r\n        context: 'addColumn',\r\n        tableName: table,\r\n        foreignKey: key,\r\n      }),\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  removeColumnQuery(tableName, attributeName) {\r\n    return Utils.joinSQLFragments([\r\n      'ALTER TABLE',\r\n      this.quoteTable(tableName),\r\n      'DROP',\r\n      this.quoteIdentifier(attributeName),\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  changeColumnQuery(tableName, attributes) {\r\n    const query = (...subQuerys) => Utils.joinSQLFragments([\r\n      'ALTER TABLE',\r\n      this.quoteTable(tableName),\r\n      'ALTER COLUMN',\r\n      ...subQuerys,\r\n      ';',\r\n    ]);\r\n    const sql = [];\r\n    for (const attributeName in attributes) {\r\n      let definition = this.dataTypeMapping(tableName, attributeName, attributes[attributeName]);\r\n      const attrSql = [];\r\n\r\n      if (definition.includes('NOT NULL')) {\r\n        attrSql.push(query(this.quoteIdentifier(attributeName), 'SET NOT NULL'));\r\n\r\n        definition = definition.replace('NOT NULL', '').trim();\r\n      } else if (!definition.includes('REFERENCES')) {\r\n        attrSql.push(query(this.quoteIdentifier(attributeName), 'DROP NOT NULL'));\r\n      }\r\n\r\n      if (definition.includes('DEFAULT')) {\r\n        attrSql.push(query(this.quoteIdentifier(attributeName), 'SET DEFAULT', definition.match(/DEFAULT ([^;]+)/)[1]));\r\n\r\n        definition = definition.replace(/(DEFAULT[^;]+)/, '').trim();\r\n      } else if (!definition.includes('REFERENCES')) {\r\n        attrSql.push(query(this.quoteIdentifier(attributeName), 'DROP DEFAULT'));\r\n      }\r\n\r\n      if (/UNIQUE;*$/.test(definition)) {\r\n        definition = definition.replace(/UNIQUE;*$/, '');\r\n        attrSql.push(query('ADD UNIQUE (', this.quoteIdentifier(attributeName), ')').replace('ALTER COLUMN', ''));\r\n      }\r\n\r\n      if (definition.includes('REFERENCES')) {\r\n        definition = definition.replace(/.+?(?=REFERENCES)/, '');\r\n        attrSql.push(query('ADD FOREIGN KEY (', this.quoteIdentifier(attributeName), ')', definition).replace('ALTER COLUMN', ''));\r\n      } else {\r\n        attrSql.push(query(this.quoteIdentifier(attributeName), 'TYPE', definition));\r\n      }\r\n\r\n      sql.push(attrSql.join(''));\r\n    }\r\n\r\n    return sql.join('');\r\n  }\r\n\r\n  renameColumnQuery(tableName, attrBefore, attributes) {\r\n    const attrString = [];\r\n\r\n    for (const attrName in attributes) {\r\n      const definition = attributes[attrName];\r\n      attrString.push(`'${attrBefore}' '${attrName}' ${definition}`);\r\n    }\r\n\r\n    return Utils.joinSQLFragments([\r\n      'ALTER TABLE',\r\n      this.quoteTable(tableName),\r\n      'RENAME COLUMN',\r\n      attrString.join(' to '),\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  handleSequelizeMethod(attr, tableName, factory, options, prepend) {\r\n    if (attr instanceof Utils.Json) {\r\n      // Parse nested object\r\n      if (attr.conditions) {\r\n        const conditions = this.parseConditionObject(attr.conditions).map(condition => `${this.jsonPathExtractionQuery(condition.path[0], _.tail(condition.path))} = '${condition.value}'`);\r\n\r\n        return conditions.join(' AND ');\r\n      }\r\n\r\n      if (attr.path) {\r\n        let str;\r\n\r\n        // Allow specifying conditions using the sqlite json functions\r\n        if (this._checkValidJsonStatement(attr.path)) {\r\n          str = attr.path;\r\n        } else {\r\n          // Also support json property accessors\r\n          const paths = _.toPath(attr.path);\r\n          const column = paths.shift();\r\n          str = this.jsonPathExtractionQuery(column, paths);\r\n        }\r\n\r\n        if (attr.value) {\r\n          str += util.format(' = %s', this.escape(attr.value, undefined, options));\r\n        }\r\n\r\n        return str;\r\n      }\r\n    } else if (attr instanceof Utils.Cast) {\r\n      if (/timestamp/i.test(attr.type)) {\r\n        attr.type = 'datetime';\r\n      } else if (attr.json && /boolean/i.test(attr.type)) {\r\n        // true or false cannot be casted as booleans within a JSON structure\r\n        attr.type = 'char';\r\n      } else if (/double precision/i.test(attr.type) || /boolean/i.test(attr.type) || /integer/i.test(attr.type)) {\r\n        attr.type = 'decimal';\r\n      } else if (/text/i.test(attr.type)) {\r\n        attr.type = 'char';\r\n      }\r\n    }\r\n\r\n    return super.handleSequelizeMethod(attr, tableName, factory, options, prepend);\r\n  }\r\n\r\n  truncateTableQuery(tableName) {\r\n    return Utils.joinSQLFragments([\r\n      'TRUNCATE',\r\n      this.quoteTable(tableName),\r\n    ]);\r\n  }\r\n\r\n  deleteQuery(tableName, where, options = {}, model) {\r\n    const table = this.quoteTable(tableName);\r\n    let whereClause = this.getWhereConditions(where, null, model, options);\r\n    const limit = options.limit && ` LIMIT ${this.escape(options.limit, undefined, options)}`;\r\n    let primaryKeys = '';\r\n    let primaryKeysSelection = '';\r\n\r\n    if (whereClause) {\r\n      whereClause = `WHERE ${whereClause}`;\r\n    }\r\n\r\n    if (limit) {\r\n      if (!model) {\r\n        throw new Error('Cannot LIMIT delete without a model.');\r\n      }\r\n\r\n      const pks = Object.values(model.primaryKeys).map(pk => this.quoteIdentifier(pk.field)).join(',');\r\n\r\n      primaryKeys = model.primaryKeyAttributes.length > 1 ? `(${pks})` : pks;\r\n      primaryKeysSelection = pks;\r\n\r\n      return Utils.joinSQLFragments([\r\n        'DELETE FROM',\r\n        table,\r\n        'WHERE',\r\n        primaryKeys,\r\n        'IN (SELECT',\r\n        primaryKeysSelection,\r\n        'FROM',\r\n        table,\r\n        whereClause,\r\n        limit,\r\n        ')',\r\n      ]);\r\n    }\r\n\r\n    return Utils.joinSQLFragments([\r\n      'DELETE FROM',\r\n      table,\r\n      whereClause,\r\n    ]);\r\n  }\r\n\r\n  showIndexesQuery() {\r\n    return 'SELECT \\'\\' FROM DUAL';\r\n  }\r\n\r\n  showConstraintsQuery(table, constraintName) {\r\n    const tableName = table.tableName || table;\r\n    const schemaName = table.schema;\r\n\r\n    return Utils.joinSQLFragments([\r\n      'SELECT CONSTRAINT_CATALOG AS constraintCatalog,',\r\n      'CONSTRAINT_NAME AS constraintName,',\r\n      'CONSTRAINT_SCHEMA AS constraintSchema,',\r\n      'CONSTRAINT_TYPE AS constraintType,',\r\n      'TABLE_NAME AS tableName,',\r\n      'TABLE_SCHEMA AS tableSchema',\r\n      'from INFORMATION_SCHEMA.TABLE_CONSTRAINTS',\r\n      `WHERE table_name='${tableName}'`,\r\n      constraintName && `AND constraint_name = '${constraintName}'`,\r\n      schemaName && `AND TABLE_SCHEMA = '${schemaName}'`,\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  removeIndexQuery(tableName, indexNameOrAttributes) {\r\n    let indexName = indexNameOrAttributes;\r\n\r\n    if (typeof indexName !== 'string') {\r\n      indexName = Utils.underscore(`${tableName}_${indexNameOrAttributes.join('_')}`);\r\n    }\r\n\r\n    return Utils.joinSQLFragments([\r\n      'DROP INDEX',\r\n      this.quoteIdentifier(indexName),\r\n      'ON',\r\n      this.quoteTable(tableName),\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  attributeToSQL(attribute, options) {\r\n    if (!_.isPlainObject(attribute)) {\r\n      attribute = {\r\n        type: attribute,\r\n      };\r\n    }\r\n\r\n    const attributeString = attribute.type.toString({ escape: this.escape.bind(this) });\r\n    let template = attributeString;\r\n\r\n    if (attribute.allowNull === false) {\r\n      template += ' NOT NULL';\r\n    }\r\n\r\n    if (attribute.autoIncrement) {\r\n      template += ' AUTOINCREMENT';\r\n    }\r\n\r\n    // BLOB/TEXT/GEOMETRY/JSON cannot have a default value\r\n    if (!typeWithoutDefault.has(attributeString)\r\n      && attribute.type._binary !== true\r\n      && Utils.defaultValueSchemable(attribute.defaultValue)) {\r\n      template += ` DEFAULT ${this.escape(attribute.defaultValue, undefined, options)}`;\r\n    }\r\n\r\n    if (attribute.unique === true) {\r\n      template += ' UNIQUE';\r\n    }\r\n\r\n    if (attribute.primaryKey) {\r\n      template += ' PRIMARY KEY';\r\n    }\r\n\r\n    if (attribute.comment) {\r\n      template += ` COMMENT ${this.escape(attribute.comment, undefined, options)}`;\r\n    }\r\n\r\n    if (attribute.first) {\r\n      template += ' FIRST';\r\n    }\r\n\r\n    if (attribute.after) {\r\n      template += ` AFTER ${this.quoteIdentifier(attribute.after)}`;\r\n    }\r\n\r\n    if (attribute.references) {\r\n      if (options && options.context === 'addColumn' && options.foreignKey) {\r\n        const attrName = this.quoteIdentifier(options.foreignKey);\r\n        const fkName = this.quoteIdentifier(`${options.tableName}_${attrName}_foreign_idx`);\r\n\r\n        template += `, ADD CONSTRAINT ${fkName} FOREIGN KEY (${attrName})`;\r\n      }\r\n\r\n      template += ` REFERENCES ${this.quoteTable(attribute.references.model)}`;\r\n\r\n      if (attribute.references.key) {\r\n        template += ` (${this.quoteIdentifier(attribute.references.key)})`;\r\n      } else {\r\n        template += ` (${this.quoteIdentifier('id')})`;\r\n      }\r\n\r\n      if (attribute.onDelete) {\r\n        template += ` ON DELETE ${attribute.onDelete.toUpperCase()}`;\r\n      }\r\n\r\n      if (attribute.onUpdate) {\r\n        template += ` ON UPDATE ${attribute.onUpdate.toUpperCase()}`;\r\n      }\r\n    }\r\n\r\n    return template;\r\n  }\r\n\r\n  attributesToSQL(attributes, options) {\r\n    const result = {};\r\n\r\n    for (const key in attributes) {\r\n      const attribute = attributes[key];\r\n      result[attribute.field || key] = this.attributeToSQL(attribute, options);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Check whether the statmement is json function or simple path\r\n   *\r\n   * @param   {string}  stmt  The statement to validate\r\n   * @returns {boolean}       true if the given statement is json function\r\n   * @throws  {Error}         throw if the statement looks like json function but has invalid token\r\n   * @private\r\n   */\r\n  _checkValidJsonStatement(stmt) {\r\n    if (typeof stmt !== 'string') {\r\n      return false;\r\n    }\r\n\r\n    let currentIndex = 0;\r\n    let openingBrackets = 0;\r\n    let closingBrackets = 0;\r\n    let hasJsonFunction = false;\r\n    let hasInvalidToken = false;\r\n\r\n    while (currentIndex < stmt.length) {\r\n      const string = stmt.slice(currentIndex);\r\n      const functionMatches = JSON_FUNCTION_REGEX.exec(string);\r\n      if (functionMatches) {\r\n        currentIndex += functionMatches[0].indexOf('(');\r\n        hasJsonFunction = true;\r\n        continue;\r\n      }\r\n\r\n      const operatorMatches = JSON_OPERATOR_REGEX.exec(string);\r\n      if (operatorMatches) {\r\n        currentIndex += operatorMatches[0].length;\r\n        hasJsonFunction = true;\r\n        continue;\r\n      }\r\n\r\n      const tokenMatches = TOKEN_CAPTURE_REGEX.exec(string);\r\n      if (tokenMatches) {\r\n        const capturedToken = tokenMatches[1];\r\n        if (capturedToken === '(') {\r\n          openingBrackets++;\r\n        } else if (capturedToken === ')') {\r\n          closingBrackets++;\r\n        } else if (capturedToken === ';') {\r\n          hasInvalidToken = true;\r\n          break;\r\n        }\r\n\r\n        currentIndex += tokenMatches[0].length;\r\n        continue;\r\n      }\r\n\r\n      break;\r\n    }\r\n\r\n    // Check invalid json statement\r\n    if (hasJsonFunction && (hasInvalidToken || openingBrackets !== closingBrackets)) {\r\n      throw new Error(`Invalid json statement: ${stmt}`);\r\n    }\r\n\r\n    // return true if the statement has valid json function\r\n    return hasJsonFunction;\r\n  }\r\n\r\n  dataTypeMapping(tableName, attr, dataType) {\r\n    if (dataType.includes('PRIMARY KEY')) {\r\n      dataType = dataType.replace('PRIMARY KEY', '');\r\n    }\r\n\r\n    if (dataType.includes('SERIAL')) {\r\n      if (dataType.includes('BIGINT')) {\r\n        dataType = dataType.replace('SERIAL', 'BIGSERIAL');\r\n        dataType = dataType.replace('BIGINT', '');\r\n      } else if (dataType.includes('SMALLINT')) {\r\n        dataType = dataType.replace('SERIAL', 'SMALLSERIAL');\r\n        dataType = dataType.replace('SMALLINT', '');\r\n      } else {\r\n        dataType = dataType.replace('INTEGER', '');\r\n      }\r\n\r\n      dataType = dataType.replace('NOT NULL', '');\r\n    }\r\n\r\n    return dataType;\r\n  }\r\n\r\n  /**\r\n   * Generates an SQL query that returns all foreign keys of a table.\r\n   *\r\n   * @param  {object} table  The table.\r\n   * @param  {string} schemaName The name of the schema.\r\n   * @returns {string}            The generated sql query.\r\n   * @private\r\n   */\r\n  getForeignKeysQuery(table, schemaName) {\r\n    const tableName = table.tableName || table;\r\n\r\n    return Utils.joinSQLFragments([\r\n      'SELECT',\r\n      FOREIGN_KEY_FIELDS,\r\n      `FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = '${tableName}'`,\r\n      `AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='${schemaName}'`,\r\n      'AND REFERENCED_TABLE_NAME IS NOT NULL',\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Generates an SQL query that returns the foreign key constraint of a given column.\r\n   *\r\n   * @param  {object} table  The table.\r\n   * @param  {string} columnName The name of the column.\r\n   * @returns {string}            The generated sql query.\r\n   * @private\r\n   */\r\n  getForeignKeyQuery(table, columnName) {\r\n    const quotedSchemaName = table.schema ? wrapSingleQuote(table.schema) : '';\r\n    const quotedTableName = wrapSingleQuote(table.tableName || table);\r\n    const quotedColumnName = wrapSingleQuote(columnName);\r\n\r\n    return Utils.joinSQLFragments([\r\n      'SELECT',\r\n      FOREIGN_KEY_FIELDS,\r\n      'FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE',\r\n      'WHERE (',\r\n      [\r\n        `REFERENCED_TABLE_NAME = ${quotedTableName}`,\r\n        table.schema && `AND REFERENCED_TABLE_SCHEMA = ${quotedSchemaName}`,\r\n        `AND REFERENCED_COLUMN_NAME = ${quotedColumnName}`,\r\n      ],\r\n      ') OR (',\r\n      [\r\n        `TABLE_NAME = ${quotedTableName}`,\r\n        table.schema && `AND TABLE_SCHEMA = ${quotedSchemaName}`,\r\n        `AND COLUMN_NAME = ${quotedColumnName}`,\r\n        'AND REFERENCED_TABLE_NAME IS NOT NULL',\r\n      ],\r\n      ')',\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Generates an SQL query that removes a foreign key from a table.\r\n   *\r\n   * @param  {string} tableName  The name of the table.\r\n   * @param  {string} foreignKey The name of the foreign key constraint.\r\n   * @returns {string}            The generated sql query.\r\n   * @private\r\n   */\r\n  dropForeignKeyQuery(tableName, foreignKey) {\r\n    return Utils.joinSQLFragments([\r\n      'ALTER TABLE',\r\n      this.quoteTable(tableName),\r\n      'DROP FOREIGN KEY',\r\n      this.quoteIdentifier(foreignKey),\r\n      ';',\r\n    ]);\r\n  }\r\n\r\n  addLimitAndOffset(options) {\r\n    if (options.offset) {\r\n      return ` LIMIT ${this.escape(options.limit ?? null, undefined, options)} OFFSET ${this.escape(options.offset, undefined, options)}`;\r\n    }\r\n\r\n    if (options.limit != null) {\r\n      return ` LIMIT ${this.escape(options.limit, undefined, options)}`;\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Quote identifier in sql clause\r\n   *\r\n   * @param {string} identifier\r\n   * @param {boolean} force\r\n   *\r\n   * @returns {string}\r\n   */\r\n  quoteIdentifier(identifier, force) {\r\n    const optForceQuote = force || false;\r\n    const optQuoteIdentifiers = this.options.quoteIdentifiers !== false;\r\n    const rawIdentifier = Utils.removeTicks(identifier, '\"');\r\n\r\n    if (\r\n      optForceQuote === true\r\n      || optQuoteIdentifiers !== false\r\n      || identifier.includes('.')\r\n      || identifier.includes('->')\r\n      || SNOWFLAKE_RESERVED_WORDS.includes(rawIdentifier.toLowerCase())\r\n    ) {\r\n      // In Snowflake if tables or attributes are created double-quoted,\r\n      // they are also case sensitive. If they contain any uppercase\r\n      // characters, they must always be double-quoted. This makes it\r\n      // impossible to write queries in portable SQL if tables are created in\r\n      // this way. Hence, we strip quotes if we don't want case sensitivity.\r\n      return Utils.addTicks(rawIdentifier, '\"');\r\n    }\r\n\r\n    return rawIdentifier;\r\n  }\r\n}\r\n\r\n// private methods\r\nfunction wrapSingleQuote(identifier) {\r\n  return Utils.addTicks(identifier, '\\'');\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
