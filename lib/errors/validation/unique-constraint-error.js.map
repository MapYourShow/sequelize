{
  "version": 3,
  "sources": ["../../../src/errors/validation/unique-constraint-error.ts"],
  "sourcesContent": ["import { useErrorCause } from '../../utils/deprecations.js';\r\nimport type { CommonErrorProperties, SequelizeErrorOptions } from '../base-error';\r\nimport type { ValidationErrorItem } from '../validation-error';\r\nimport ValidationError from '../validation-error';\r\n\r\ninterface UniqueConstraintErrorParent extends Error, Pick<CommonErrorProperties, 'sql'> {}\r\n\r\nexport interface UniqueConstraintErrorOptions extends SequelizeErrorOptions {\r\n  cause?: UniqueConstraintErrorParent;\r\n\r\n  /**\r\n   * @deprecated use {@link UniqueConstraintErrorOptions.cause}\r\n   */\r\n  parent?: UniqueConstraintErrorParent;\r\n  errors?: ValidationErrorItem[];\r\n  fields?: Record<string, unknown>;\r\n  message?: string;\r\n}\r\n\r\n/**\r\n * Thrown when a unique constraint is violated in the database\r\n */\r\nclass UniqueConstraintError extends ValidationError implements CommonErrorProperties {\r\n  /** The database specific error which triggered this one */\r\n  declare cause: UniqueConstraintErrorParent | undefined;\r\n\r\n  readonly fields: Record<string, unknown>;\r\n  readonly sql: string;\r\n\r\n  constructor(options: UniqueConstraintErrorOptions = {}) {\r\n    if ('parent' in options) {\r\n      useErrorCause();\r\n    }\r\n\r\n    const parent = options.cause ?? options.parent ?? { sql: '', name: '', message: '' };\r\n    const message = options.message || parent.message || 'Validation Error';\r\n    const errors = options.errors ?? [];\r\n    super(message, errors, { stack: options.stack, cause: parent });\r\n\r\n    this.name = 'SequelizeUniqueConstraintError';\r\n    this.fields = options.fields ?? {};\r\n    this.sql = parent.sql;\r\n  }\r\n}\r\n\r\nexport default UniqueConstraintError;\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA8B;AAG9B,8BAA4B;AAmB5B,MAAM,8BAA8B,gCAAiD;AAAA,EAI1E;AAAA,EACA;AAAA,EAET,YAAY,UAAwC,CAAC,GAAG;AACtD,QAAI,YAAY,SAAS;AACvB,6CAAc;AAAA,IAChB;AAEA,UAAM,SAAS,QAAQ,SAAS,QAAQ,UAAU,EAAE,KAAK,IAAI,MAAM,IAAI,SAAS,GAAG;AACnF,UAAM,UAAU,QAAQ,WAAW,OAAO,WAAW;AACrD,UAAM,SAAS,QAAQ,UAAU,CAAC;AAClC,UAAM,SAAS,QAAQ,EAAE,OAAO,QAAQ,OAAO,OAAO,OAAO,CAAC;AAE9D,SAAK,OAAO;AACZ,SAAK,SAAS,QAAQ,UAAU,CAAC;AACjC,SAAK,MAAM,OAAO;AAAA,EACpB;AACF;AAEA,IAAO,kCAAQ;",
  "names": []
}
